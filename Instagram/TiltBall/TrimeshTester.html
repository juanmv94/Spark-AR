<!DOCTYPE html>
<html>
  <head>
    <title>Trimesh Tester - Juanmv94</title>
    <meta charset="utf-8">
    <link rel="stylesheet" href="css/style.css" type="text/css"/>
    <meta name="viewport" content="width=device-width, user-scalable=no, minimum-scale=1.0, maximum-scale=1.0">
  </head>
  <body>
    <script src="../build/cannon.js"></script>
    <script src="../build/cannon.demo.js"></script>
    <script src="../libs/dat.gui.js"></script>
    <script src="../libs/Three.js"></script>
    <script src="../libs/TrackballControls.js"></script>
    <script src="../libs/Detector.js"></script>
    <script src="../libs/Stats.js"></script>
    <script src="../libs/smoothie.js"></script>
    <script>

    var demo = new CANNON.Demo();
    var size = 1;

    demo.addScene("Box",function(){

    // Create world
    var world = demo.getWorld();
    world.broadphase = new CANNON.NaiveBroadphase();
	const G = 9
	const FRICTION = 0.5;
	const RESTITUTION = 0;

	world.gravity.set(0, -G, 0);
	
	const boxMat = new CANNON.Material();
	world.addContactMaterial(new CANNON.ContactMaterial(boxMat,boxMat,{friction:FRICTION,restitution:RESTITUTION}));
	
	const boxprops={mass: 1, position: new CANNON.Vec3(0,3,0), shape: new CANNON.Sphere(1), material: boxMat};
    box = new CANNON.Body(boxprops);
    world.addBody(box);
	
	var labshape=new CANNON.Trimesh([21.095942,3.149606,-13.829988,19.521139,3.149606,-19.718107,19.521139,3.149606,-13.829988,28.576258,3.149606,-19.718107,25.459291,3.149606,-3.104815,28.576258,3.149606,-3.104815,26.382675,3.149606,-0.835125,28.576258,3.149606,-0.835125,10.07232,3.149606,-19.718107,13.407367,0,-19.718107,10.07232,0,-19.718107,13.407367,2.228806,-19.718107,16.163271,2.228806,-19.718107,19.521139,0,-19.718107,16.163271,0,-19.718107,16.163271,2.228806,-11.640451,16.163271,0,-6.340661,13.407367,2.228806,-11.640451,13.407367,0,-6.340661,19.521139,0,-6.340661,10.07232,3.149606,-13.829988,10.07232,0,-6.340661,-6.711112,0,4.556732,-2.628166,0,-4.765801,-6.711112,0,-9.01777,8.182556,0,4.556732,4.064747,0,-4.765801,4.064747,0,-5.868163,-2.628166,0,-5.868163,-2.380404,0,-9.01777,-2.380404,0,-10.435092,3.851848,0,-11.858353,8.182556,0,-11.858353,-6.711112,0,-16.425282,-6.711112,0,-10.435092,4.09961,0,-16.425282,3.851848,0,-13.275676,8.182556,0,-13.275676,4.09961,0,-17.527645,-6.711112,0,-17.527645,-2.628166,0,-20.915979,-6.711112,0,-29.650675,8.182556,0,-20.915979,10.07232,0,-25.400341,19.521139,0,4.556732,10.07232,0,4.556732,-2.628166,0,-22.018341,19.521139,0,-29.650675,8.182556,0,-25.400341,8.182556,0,-22.018341,4.064747,3.149606,-4.765801,-2.628166,3.149606,-5.868163,-2.628166,3.149606,-4.765801,4.064747,3.149606,-5.868163,10.07232,3.149606,6.547517,19.521139,5.905512,4.556732,10.07232,3.149606,4.556732,19.521139,5.905512,6.547517,8.182556,3.149606,-20.915979,-2.628166,3.149606,-22.018341,-2.628166,3.149606,-20.915979,8.182556,3.149606,-22.018341,8.182556,3.149606,-11.858353,3.851848,3.149606,-13.275676,3.851848,3.149606,-11.858353,8.182556,3.149606,-13.275676,-8.701898,3.149606,6.547517,-6.711112,3.149606,4.556732,-8.701898,3.149606,-31.64146,8.182556,3.149606,4.556732,8.182556,3.149606,-25.400341,10.07232,3.149606,-25.400341,-2.380404,3.149606,-9.01777,-6.711112,3.149606,-10.435092,-6.711112,3.149606,-9.01777,-2.380404,3.149606,-10.435092,4.09961,3.149606,-16.425282,-6.711112,3.149606,-17.527645,-6.711112,3.149606,-16.425282,4.09961,3.149606,-17.527645,-6.711112,3.149606,-29.650675,10.07232,3.149606,-31.64146,10.07232,3.149606,-29.650675,30.567041,5.905512,6.547517,-8.701898,0,6.547517,30.567041,0,6.547517,26.382675,5.905512,-0.835125,19.521139,5.905512,-13.829988,21.095942,5.905512,-13.829988,28.576258,5.905512,-0.835125,28.576258,5.905512,-19.718107,19.521139,5.905512,-29.650675,19.521139,5.905512,-19.718107,19.521139,5.905512,-31.64146,30.567041,5.905512,-31.64146,30.567041,0,-31.64146,-8.701898,0,-31.64146],[0,1,2,1,0,3,3,0,4,3,4,5,6,5,4,5,6,7,8,9,10,9,8,11,11,8,12,12,13,14,13,12,1,1,12,8,15,14,16,14,15,12,12,17,11,17,12,15,9,17,18,17,9,11,19,15,16,18,20,21,20,18,17,20,17,2,2,17,15,2,15,19,2,8,20,8,2,1,22,23,24,23,22,25,23,25,26,26,25,27,24,28,29,28,24,23,29,28,27,29,27,30,30,27,31,31,27,32,32,27,25,30,33,34,33,30,35,35,30,36,36,30,31,35,36,37,35,37,38,39,40,41,40,39,38,40,38,42,42,38,37,9,43,10,44,21,45,21,44,18,18,44,16,18,16,9,16,44,19,41,46,47,46,41,40,47,46,48,48,46,49,47,48,43,47,43,9,47,9,14,14,9,16,47,14,13,50,51,52,51,50,53,51,23,52,23,51,28,50,23,26,23,50,52,27,50,26,50,27,53,51,27,28,27,51,53,54,55,56,55,54,57,56,44,45,44,56,55,58,59,60,59,58,61,62,63,64,63,62,65,66,67,68,67,66,54,67,54,69,69,54,62,62,54,65,65,54,58,58,54,61,61,54,70,70,54,56,56,71,70,71,56,20,71,20,8,72,73,74,73,72,75,76,77,78,77,76,79,68,80,81,80,68,67,80,67,74,80,74,73,80,73,78,80,78,77,81,80,82,83,84,85,84,83,54,54,83,57,66,84,54,83,55,57,55,83,86,55,86,87,87,86,88,86,83,89,89,83,90,90,91,92,91,90,93,93,90,94,94,90,83,21,56,45,56,21,20,87,44,55,44,87,19,19,87,2,47,82,41,82,47,91,80,41,82,82,93,81,93,82,91,68,95,96,95,68,81,95,81,94,94,81,93,68,84,66,84,68,96,43,8,10,8,43,71,70,43,48,43,70,71,70,49,61,49,70,48,46,61,49,61,46,59,59,40,60,40,59,46,58,40,42,40,58,60,58,37,65,37,58,42,63,37,36,37,63,65,63,31,64,31,63,36,32,64,31,64,32,62,62,25,69,25,62,32,22,69,25,69,22,67,24,67,22,67,24,74,72,24,29,24,72,74,30,72,29,72,30,75,73,30,34,30,73,75,33,73,34,73,33,78,76,33,35,33,76,78,38,76,35,76,38,79,39,79,38,79,39,77,41,77,39,77,41,80,95,83,85,83,95,94,90,7,89,7,90,5,5,90,3,86,7,6,7,86,89,4,86,6,86,4,88,88,4,0,87,0,2,0,87,88,91,1,92,1,91,13,13,91,47,3,92,1,92,3,90]);
	var lab=new CANNON.Body({mass: 0, position: new CANNON.Vec3(0,0,0), shape: labshape, material: boxMat});
	world.addBody(lab);
	
	
	demo.addVisual(box);
	demo.addVisual(lab);
	});
    demo.start();
	
	document.onkeydown= function(event){
            switch(event.keyCode){

            case 38: // forward
                box.applyForce(new CANNON.Vec3(0,0,100),box.position);
                break;

            case 40: // backward
				box.applyForce(new CANNON.Vec3(0,0,-100),box.position);
                break;

            case 39: // right
				box.applyForce(new CANNON.Vec3(-100,0,0),box.position);
                break;

            case 37: // left
				box.applyForce(new CANNON.Vec3(100,0,0),box.position);
                break;
				
			case 90: // Z
                box.applyForce(new CANNON.Vec3(0,500,0),box.position);
                break;
            }
        }

    </script>
  </body>
</html>
